<!DOCTYPE html>
<html>
	<head>
		<title>SpaceHacks</title>
		<link rel="stylesheet" type="text/css" href="style/reset.css">
		<link rel="stylesheet/less" type="text/css" href="style/main.less">
		<!-- LESS JS <script type="text/javascript" src="lib/less.min.js"></script> -->
		<!--<link rel="icon" type="img/png" href="style/favicon.png" style="width:30px;">-->
		<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,900' rel='stylesheet' type='text/css'>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.6.1/firebase.js"></script>
		<style>

			canvas {
				width: 512px;
				height: 512px;
			}

		</style>
	</head>

	<body>

		<canvas id="canvas" width="1000px" height="1000px"></canvas>

		<script type="text/javascript" src="lib/infra.js"></script>
		<script type="text/javascript" src="lib/circuits.js"></script>
		<script type="text/javascript" src="lib/circuitlogic.js"></script>

		<script type="text/javascript">

			var challenge = generateChallenge();

			var FIDX = 0;
			var boards = challenge.options;

			render();

			function render(){
				FIDX = (boards.length + FIDX) % boards.length;
				var newCircuit = boards[FIDX];
				if(newCircuit){
					renderCircuit(newCircuit);
				}
				else{
					var circuit = {
						nodes: {
							a: true,
							b: true,
							c: true,
							d: false,
							e: false
						},
						led: 'red',
						wires: [
							{node1: 'a', node2: 'c', broken: false},
							{node1: 'c', node2: 'b', broken: true}
						]
					}
					renderCircuit(circuit);
				}
			}

			window.stepBackward = function(){
				FIDX--;
				render();
			}

			window.stepForward = function(){
				FIDX++;
				render();
			}

			MissionLink.sync();

			MissionLink.alphaCallback = stepBackward;
			MissionLink.betaCallback = false;
			MissionLink.gammaCallback = stepForward;

		</script>

	</body>
</html>
